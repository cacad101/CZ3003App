<head>
  <title>CZ3003App</title>
</head>

<body>
  {{> Header}}
  <div id="wrapper">
  	<script>
        //Check whether user is logged in -> determine the button display on the top right corner
        window.onload = function() {
            var profileDisplay;
            var profileDropdown = document.getElementById("profileDropdown");
            var dropdownListLogout = document.createElement("a");
            var logoutButton = document.createTextNode("Sign Out");
            
            if (Meteor.user()) {
                profileDisplay = "Hi, " + Meteor.user().username + " ▼";
                //dropdownListLogout.className = "dropdown-menu";
                dropdownListLogout.appendChild(logoutButton);
                dropdownListLogout.onclick = function() { logout(); };
                profileDropdown.appendChild(dropdownListLogout);
            } else {
                profileDisplay = "Hi There! ▼";
            }
            //Show username greeting or default button display
            document.getElementById("profileButton").innerHTML = profileDisplay;
            
            //Show the dropdown list
            
                                     
        }
        
        function logout() {
            Meteor.logout();
            setTimeout(function() { redirect(); }, 1000);
        }
        
        function redirect() {
            window.location = "/";   
        }
        
        //Redirect to user profile
  		function userPage() {
  			var userId = Meteor.userId();
  			var url = '/user/'+userId+'/0';
  			window.location.href = url;	
  		}
    </script>
        <!-- Sidebar -->
       <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/map">Map</a>
                </li>
                <li>
                    <a href="/category/view">Category</a>
                </li>
                <li>
                    <a href="/reports/view">Report</a>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->


         <div id="root"></div>
        <!-- Page Content -->
        <div id="page-content-wrapper">
              <div id="container"></div>

        </div>
        <!-- /#page-content-wrapper -->
    <!-- /#wrapper -->
     </div>
  <!-- {{> Footer}} -->
  <!-- {{> Footer}} -->
</body>


<template name="Header">
    <table width="100%" class="header">
        <tr>
            <th width="88%" align= "left"><img src="images/MDPLogo.jpg" height="50" width="50px"/></th>
            <th width="12%" class="th_right" style="text-align: right;">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a  id="profileButton" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Hi There! <span class="caret"></span></a>
              <ul id="profileDropdown" class="dropdown-menu">
                <li><a onclick="userPage()">View Profile</a></li>
                <!--<li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#">Separated link</a></li>-->
                <li role="separator" class="divider"></li>
                <!--<li><a href="#">Sign Out</a></li>-->
              </ul>
            </li>
                </ul>
            </th> 
        </tr>
    </table>
</template>

<template name="Footer">
  <h1>Footer template goes here</h1>
</template>
